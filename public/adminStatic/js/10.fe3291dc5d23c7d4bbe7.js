webpackJsonp([10],{WXal:function(a,t){},pxR6:function(a,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={components:{Uploadimg:e("YAzi").a},data:function(){return{formData:{username:"",password:"",numId:"",avatar:"",desc:"",grade:null,sex:null},faculty:null,major:null,facultyCatalog:[],majorCatalog:[],gradeCatalog:[]}},methods:{handleSubmit:function(){var a=this;this.formData.numId&&this.formData.username&&this.formData.password&&this.formData.grade?this.$axios.post("/user/student",this.formData).then(function(t){0==t.code?(a.$message.success(t.msg),setTimeout(function(){a.$router.push("/layout/studentList")},500)):a.$message.info(t.msg)}):this.$message("请输入必填字段")},getdata:function(){var a=this,t=this.$route.params.id;this.$axios.get("/user/student/"+t).then(function(t){a.formData=t.data,a.gradeCatalog=[t.data.grade],a.formData.grade=t.data.grade._id})},handlerevise:function(){var a=this,t=this.$route.params.id;this.$axios.put("/user/student/"+t,this.formData).then(function(t){0==t.code&&setTimeout(function(){a.$message.success(t.msg),a.$router.push("/layout/studentList")},500)})},handleFaculty:function(){var a=this;this.$axios.get("/faculty").then(function(t){0==t.code&&(a.facultyCatalog=t.data)})},handleMajor:function(a){var t=this;this.$axios.get("/major/faculty/"+a).then(function(a){0==a.code&&(t.majorCatalog=a.data)})},handleGrade:function(a){var t=this;this.$axios.get("/grade/major/"+a).then(function(a){0==a.code&&(t.gradeCatalog=a.data)})}},created:function(){this.handleFaculty()},computed:{isrevise:function(){return"修改学生"==this.$route.meta.title?(this.getdata(),!0):(this.formData={},!1)}},watch:{faculty:function(a){this.handleMajor(a),this.major="",delete this.formData.grade},major:function(a){this.handleGrade(a),delete this.formData.grade}}},o={render:function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",[e("el-breadcrumb",{staticClass:"mb30",attrs:{separator:"/"}},[e("el-breadcrumb-item",{attrs:{to:{path:"/layout/home"}}},[a._v("首页")]),a._v(" "),e("el-breadcrumb-item",{attrs:{to:{path:"/layout/studentList"}}},[a._v("学生用户列表页")]),a._v(" "),a.isrevise?e("el-breadcrumb-item",[a._v("修改学生用户")]):e("el-breadcrumb-item",[a._v("添加学生用户")])],1),a._v(" "),e("el-card",[e("el-form",{ref:"form",staticClass:"table-ys",attrs:{model:a.formData,"label-width":"100px","label-position":"left"}},[e("el-form-item",{attrs:{label:"学号",required:""}},[e("el-input",{attrs:{disabled:a.isrevise},model:{value:a.formData.numId,callback:function(t){a.$set(a.formData,"numId",t)},expression:"formData.numId"}})],1),a._v(" "),e("el-form-item",{attrs:{label:"用户名",required:""}},[e("el-input",{attrs:{disabled:a.isrevise},model:{value:a.formData.username,callback:function(t){a.$set(a.formData,"username",t)},expression:"formData.username"}})],1),a._v(" "),a.isrevise?a._e():e("el-form-item",{attrs:{label:"密码",required:""}},[e("el-input",{attrs:{type:"password"},model:{value:a.formData.password,callback:function(t){a.$set(a.formData,"password",t)},expression:"formData.password"}})],1),a._v(" "),e("el-form-item",{attrs:{label:"院系"}},[e("el-select",{model:{value:a.faculty,callback:function(t){a.faculty=t},expression:"faculty"}},a._l(a.facultyCatalog,function(a){return e("el-option",{key:a._id,attrs:{label:a.facultyName,value:a._id}})}))],1),a._v(" "),e("el-form-item",{attrs:{label:"专业"}},[e("el-select",{attrs:{placeholder:"请先选择一个院系"},model:{value:a.major,callback:function(t){a.major=t},expression:"major"}},a._l(a.majorCatalog,function(a){return e("el-option",{key:a._id,attrs:{label:a.majorName,value:a._id}})}))],1),a._v(" "),e("el-form-item",{attrs:{label:"班级",required:""}},[e("el-select",{attrs:{placeholder:"请先选择一个专业"},model:{value:a.formData.grade,callback:function(t){a.$set(a.formData,"grade",t)},expression:"formData.grade"}},a._l(a.gradeCatalog,function(a){return e("el-option",{key:a._id,attrs:{label:a.gradeName,value:a._id}})}))],1),a._v(" "),e("el-form-item",{attrs:{label:"性别"}},[e("el-select",{model:{value:a.formData.sex,callback:function(t){a.$set(a.formData,"sex",t)},expression:"formData.sex"}},[e("el-option",{attrs:{label:"男",value:1}}),a._v(" "),e("el-option",{attrs:{label:"女",value:0}})],1)],1),a._v(" "),e("el-form-item",{attrs:{label:"头像"}},[e("Uploadimg",{model:{value:a.formData.avatar,callback:function(t){a.$set(a.formData,"avatar",t)},expression:"formData.avatar"}})],1),a._v(" "),e("el-form-item",{attrs:{label:"简介"}},[e("el-input",{model:{value:a.formData.desc,callback:function(t){a.$set(a.formData,"desc",t)},expression:"formData.desc"}})],1),a._v(" "),e("el-form-item",[a.isrevise?e("el-button",{attrs:{type:"primary"},on:{click:a.handlerevise}},[a._v("立即修改")]):e("el-button",{attrs:{type:"primary"},on:{click:a.handleSubmit}},[a._v("立即创建")]),a._v(" "),e("el-button",{on:{click:function(t){a.$router.push("/layout/studentList")}}},[a._v("取消")])],1)],1)],1)],1)},staticRenderFns:[]};var s=e("VU/8")(r,o,!1,function(a){e("WXal")},null,null);t.default=s.exports}});
//# sourceMappingURL=10.fe3291dc5d23c7d4bbe7.js.map