{"version":3,"sources":["webpack:///src/views/lookClock/lookClock.vue","webpack:///./src/views/lookClock/lookClock.vue?2543","webpack:///./src/views/lookClock/lookClock.vue"],"names":["lookClock","data","forData","courseData","selectCourse","user","methods","getData","_this","this","$axios","get","then","res","code","Object","mint_ui_common","getCourse","_this2","id","$store","state","userinfo","_id","url","grade","changeCourse","_this3","clickLookDetail","$router","push","created","_this4","faculty","setTimeout","lookClock_lookClock","render","_vm","_h","$createElement","_c","_self","staticClass","directives","name","rawName","value","expression","attrs","on","change","$event","$$selectedVal","Array","prototype","filter","call","target","options","o","selected","map","_value","multiple","domProps","_v","_l","item","key","textContent","_s","course_name","subjectName","_m","click","clockName","course","gradeName","teacher","username","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/5.16a6ef3547afc1044e1b.js","sourcesContent":["<template>\r\n    <div class=\"classDetail\">\r\n        <label class=\"select-course\">\r\n            <select name=\"slectbox\" v-model=\"selectCourse\" @change=\"changeCourse\">\r\n                <option :value=\"0\">可选择一个课程</option>\r\n                <option v-for=\"item in courseData\" :key=\"item._id\" :value =\"item._id\" v-text=\"item.course_name.subjectName\"></option>\r\n            </select>\r\n        </label>\r\n        <table class=\"tableStyle\">\r\n            <thead>\r\n                <tr>\r\n                    <th>考勤时间</th>\r\n                    <th>考勤科目</th>\r\n                    <th>考勤班级</th>\r\n                    <th>考勤教师</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <tr v-for=\"item in forData\" :key=\"item._id\" @click=\"clickLookDetail(item._id)\">\r\n                    <td><div>{{item.clockName}}</div></td>\r\n                    <td><div>{{item.course.course_name.subjectName}}</div></td>\r\n                    <td><div>{{item.grade.gradeName}}</div></td>\r\n                    <td><div>{{item.teacher.username}}</div></td>\r\n                </tr>\r\n            </tbody>\r\n        </table>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import { Toast} from 'mint-ui'\r\n    export default {\r\n        data() {\r\n            return{\r\n                forData: {},\r\n                courseData: [],\r\n                selectCourse: 0,\r\n                user: 'teacher'\r\n            }\r\n        },\r\n\r\n        methods: {\r\n            // 获取全部考勤信息\r\n            getData() {\r\n                this.$axios.get(`/clock/${this.user}`).then (res => {\r\n                    // console.log('教师全部考勤：', res)\r\n                    if (res.code == 0 && res.data[0]) {\r\n                        this.forData = res.data\r\n                    } else {\r\n                        Toast('还没有考勤信息');\r\n                        this.forData= [];\r\n                    }\r\n                })\r\n            },\r\n           \r\n\r\n            // 获取课程信息\r\n            getCourse() {\r\n                let id = this.$store.state.userinfo._id;\r\n                let url = 'teacher'\r\n\r\n                if (this.user == 'student') {\r\n                    id = this.$store.state.userinfo.grade._id;\r\n                    url = 'grade'\r\n                }\r\n                this.$axios.get(`/course/${url}/${id}`).then(res => {\r\n                    if (res.code == 0) {\r\n                        this.courseData = res.data;\r\n                    }\r\n                })\r\n            },\r\n\r\n            changeCourse() {\r\n                if (this.selectCourse == 0) {\r\n                        this.getData();\r\n                } else {\r\n                    \r\n                    this.$axios.get(`/clock/${this.user}/${this.selectCourse}`).then(res => {\r\n                        if (res.code == 0 && res.data[0]) {\r\n                            this.forData = res.data\r\n                        } else {\r\n                            Toast('该课程下还没有考勤信息');\r\n                            this.forData= [];\r\n                        }\r\n                    })\r\n                }\r\n            },\r\n            \r\n            // 点击跳转考勤详情页\r\n            clickLookDetail(id) {\r\n                this.$router.push(`/layout/lookClockDetail/${id}`);\r\n            }\r\n        },\r\n\r\n        created() {\r\n            if (this.$store.state.userinfo.faculty) {\r\n                // 教师用户\r\n                this.getData();\r\n                this.getCourse();\r\n            } else if (this.$store.state.userinfo.grade) {\r\n                // 学生用户\r\n                this.user = 'student'\r\n                this.getData();\r\n                this.getCourse();\r\n            } else {\r\n                Toast('请先登录');\r\n                setTimeout( () => {\r\n                    this.$router.push('/login');\r\n                })\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.tableStyle {\r\n    border-collapse: collapse;\r\n    table-layout: fixed;\r\n    width: 100%;\r\n    thead {\r\n        line-height: 0.8rem;\r\n    }\r\n    tr {\r\n        text-align: center;\r\n\r\n        &:nth-of-type(2n) {\r\n            background: rgba(206, 240, 245, .3);\r\n        }\r\n\r\n        th {\r\n            border: 1px solid #ddd;\r\n            background: #f5f5f5;\r\n            // &:nth-of-type(1),&:nth-of-type(3) {\r\n            //     width: 20%;\r\n            // }\r\n        }\r\n        td {\r\n            padding: 0.1rem;\r\n            border: 1px solid #ddd;\r\n\r\n\r\n            div {\r\n                font-size: 13px;\r\n                overflow: hidden;\r\n\r\n                white-space: normal;\r\n                text-overflow: ellipsis;\r\n                display: -webkit-box;\r\n                -webkit-line-clamp: 2;\r\n                -webkit-box-orient: vertical;\r\n                word-break: break-all;\r\n                line-height: 1.5;\r\n            }\r\n        }\r\n    }\r\n    img {\r\n        width: 0.6rem;\r\n        height: 0.6rem;\r\n        vertical-align: middle;\r\n    }\r\n}\r\n\r\n.select-course {\r\n    display: block;\r\n    padding: 0.3rem 0 0.3rem 0.3rem;\r\n\r\n    select {\r\n        -webkit-appearance: none;\r\n        padding: .15rem;\r\n        width: 3.2rem;\r\n        margin-right: .2rem;\r\n        border-radius: 4px;\r\n        background: #409eff;\r\n        color: #fff;\r\n        font-size: 14px;\r\n        outline: none;\r\n\r\n        option {\r\n            background: #eee;\r\n            color: #333;\r\n            font-size: 13px;\r\n        }\r\n    }\r\n}\r\n\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/views/lookClock/lookClock.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"classDetail\"},[_c('label',{staticClass:\"select-course\"},[_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.selectCourse),expression:\"selectCourse\"}],attrs:{\"name\":\"slectbox\"},on:{\"change\":[function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.selectCourse=$event.target.multiple ? $$selectedVal : $$selectedVal[0]},_vm.changeCourse]}},[_c('option',{domProps:{\"value\":0}},[_vm._v(\"可选择一个课程\")]),_vm._v(\" \"),_vm._l((_vm.courseData),function(item){return _c('option',{key:item._id,domProps:{\"value\":item._id,\"textContent\":_vm._s(item.course_name.subjectName)}})})],2)]),_vm._v(\" \"),_c('table',{staticClass:\"tableStyle\"},[_vm._m(0),_vm._v(\" \"),_c('tbody',_vm._l((_vm.forData),function(item){return _c('tr',{key:item._id,on:{\"click\":function($event){_vm.clickLookDetail(item._id)}}},[_c('td',[_c('div',[_vm._v(_vm._s(item.clockName))])]),_vm._v(\" \"),_c('td',[_c('div',[_vm._v(_vm._s(item.course.course_name.subjectName))])]),_vm._v(\" \"),_c('td',[_c('div',[_vm._v(_vm._s(item.grade.gradeName))])]),_vm._v(\" \"),_c('td',[_c('div',[_vm._v(_vm._s(item.teacher.username))])])])}),0)])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('thead',[_c('tr',[_c('th',[_vm._v(\"考勤时间\")]),_vm._v(\" \"),_c('th',[_vm._v(\"考勤科目\")]),_vm._v(\" \"),_c('th',[_vm._v(\"考勤班级\")]),_vm._v(\" \"),_c('th',[_vm._v(\"考勤教师\")])])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-d0c01524\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/lookClock/lookClock.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-d0c01524\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./lookClock.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./lookClock.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./lookClock.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-d0c01524\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./lookClock.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-d0c01524\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/lookClock/lookClock.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}